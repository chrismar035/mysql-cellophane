<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: MySQLc</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">MySQLc</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/mysql-cellophane_rb.html">
                mysql-cellophane.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
MySQL-cellophane is a very thin wrapper around the Mysql Ruby
implementation MySQc provides an API interface for those famaliar with SQL
and wishes to have more fine grained control over their queries, but
don&#8216;t want to write each query manually.
</p>
<table>
<tr><td valign="top">Author:</td><td>Chris Marshall (<a
href="mailto:chris@chrismar035.com">chris@chrismar035.com</a>)

</td></tr>
</table>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000004">build_query</a>&nbsp;&nbsp;
      <a href="#M000002">connect</a>&nbsp;&nbsp;
      <a href="#M000011">count</a>&nbsp;&nbsp;
      <a href="#M000010">delete</a>&nbsp;&nbsp;
      <a href="#M000015">esc</a>&nbsp;&nbsp;
      <a href="#M000003">execute</a>&nbsp;&nbsp;
      <a href="#M000014">extract_fields_from</a>&nbsp;&nbsp;
      <a href="#M000013">extract_values_from</a>&nbsp;&nbsp;
      <a href="#M000007">insert</a>&nbsp;&nbsp;
      <a href="#M000008">inserted_id</a>&nbsp;&nbsp;
      <a href="#M000001">new</a>&nbsp;&nbsp;
      <a href="#M000012">quoted_string_from</a>&nbsp;&nbsp;
      <a href="#M000006">select</a>&nbsp;&nbsp;
      <a href="#M000005">set_attributes</a>&nbsp;&nbsp;
      <a href="#M000009">update</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">extra_cond</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">field_list</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">id</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">id_field</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">query</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">result</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">table</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000001" class="method-detail">
        <a name="M000001"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000001.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000001.html');return false;">
          <span class="method-name">new</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
initializes common instance variables.
</p>
<p>
can setup connection, but does not create connection
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000004.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000004.html');return false;">
          <span class="method-name">build_query</span><span class="method-args">(update = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates the internal query string for processing. Shouldn&#8216;t ever NEED
to be used externally.
</p>
        </div>
      </div>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000002.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000002.html');return false;">
          <span class="method-name">connect</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
takes hash of connection ooptions, has default also sets @db as Mysql
instance
</p>
<p>
as separate method for lazy connection
</p>
        </div>
      </div>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000011.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000011.html');return false;">
          <span class="method-name">count</span><span class="method-args">(*vals)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns an integer of the totals returned by query
</p>
<p>
takes an optional last parameter of a hash. This hash has symbol keys of
any/all of the following: table, field_list, id_field, id, extra_cond
</p>
        </div>
      </div>

      <div id="method-M000010" class="method-detail">
        <a name="M000010"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000010.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000010.html');return false;">
          <span class="method-name">delete</span><span class="method-args">(*vals)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
deletes row(s) matching the instalce variables&#8217; criteria
</p>
<p>
takes an optional last parameter of a hash. This hash has symbol keys of
any/all of the following: table, field_list, id_field, id, extra_cond
</p>
        </div>
      </div>

      <div id="method-M000015" class="method-detail">
        <a name="M000015"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000015.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000015.html');return false;">
          <span class="method-name">esc</span><span class="method-args">(raw_string)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
takes string parameter and returns saftely escaped string
</p>
        </div>
      </div>

      <div id="method-M000003" class="method-detail">
        <a name="M000003"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000003.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000003.html');return false;">
          <span class="method-name">execute</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
builds query from parts if neccessary
</p>
<p>
returns cached result if exists
</p>
<p>
saves result in @result
</p>
        </div>
      </div>

      <div id="method-M000014" class="method-detail">
        <a name="M000014"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000014.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000014.html');return false;">
          <span class="method-name">extract_fields_from</span><span class="method-args">(hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
takes a hash and returns a comma separated list of keys
</p>
<pre>
  { :key1 =&gt; 'val1', :key2 =&gt; 'key2' } #=&gt; &quot;key1, key2&quot;
</pre>
        </div>
      </div>

      <div id="method-M000013" class="method-detail">
        <a name="M000013"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000013.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000013.html');return false;">
          <span class="method-name">extract_values_from</span><span class="method-args">(hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
takes a hash and returns a songle quoted string of the values
</p>
<pre>
  { :key =&gt; 'val1', :key2 =&gt; &quot;val'2&quot; }  #=&gt; &quot;'val1','val\'2'&quot;
</pre>
        </div>
      </div>

      <div id="method-M000007" class="method-detail">
        <a name="M000007"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000007.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000007.html');return false;">
          <span class="method-name">insert</span><span class="method-args">(inserts, *vals)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
inserts a <a href="MySQLc.html#M000001">new</a> row into the table from the
given hash
</p>
<pre>
 { :column_one_field =&gt; 'column_one_value',
 :column_two_field =&gt; 'column_two_value' }
</pre>
<p>
return the newly insertted row&#8216;s ID
</p>
<p>
takes an optional last parameter of a hash. This hash has symbol keys of
any/all of the following: table, field_list, id_field, id, extra_cond
</p>
        </div>
      </div>

      <div id="method-M000008" class="method-detail">
        <a name="M000008"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000008.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000008.html');return false;">
          <span class="method-name">inserted_id</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns the last inserted ID
</p>
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000012.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000012.html');return false;">
          <span class="method-name">quoted_string_from</span><span class="method-args">(hash_or_array)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
library function to convert values in a hash (or plain array) into an
escaped single quoted comma delimited string
</p>
<p>
i.e.
</p>
<pre>
  { :key =&gt; 'val1', :key2 =&gt; &quot;val'2&quot; }  #=&gt; &quot;'val1','val\'2'&quot;
  [ 'val1', &quot;val'2&quot; ]                   #=&gt; &quot;'val1', 'val\'2'&quot;
</pre>
        </div>
      </div>

      <div id="method-M000006" class="method-detail">
        <a name="M000006"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000006.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000006.html');return false;">
          <span class="method-name">select</span><span class="method-args">(*vals)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
creates a <a href="MySQLc.html#M000006">select</a> query and returns the
reqult as Mysql::Result
</p>
<p>
takes an optional last parameter of a hash. This hash has symbol keys of
any/all of the following: table, field_list, id_field, id, extra_cond
</p>
        </div>
      </div>

      <div id="method-M000005" class="method-detail">
        <a name="M000005"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000005.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000005.html');return false;">
          <span class="method-name">set_attributes</span><span class="method-args">(*vals)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
sets instance attributes from fucntion parameters called by each public API
methods
</p>
        </div>
      </div>

      <div id="method-M000009" class="method-detail">
        <a name="M000009"></a>

        <div class="method-heading">
          <a href="MySQLc.src/M000009.html" target="Code" class="method-signature"
            onclick="popupCode('MySQLc.src/M000009.html');return false;">
          <span class="method-name">update</span><span class="method-args">(updates, *vals)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
takes a given hash:
</p>
<pre>
 { :column_one_field =&gt; 'column_one_value', :column_two_field =&gt; 'column_two_value' }
</pre>
<p>
and updates the correct row
</p>
<p>
takes an optional last parameter of a hash. This hash has symbol keys of
any/all of the following: table, field_list, id_field, id, extra_cond
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>